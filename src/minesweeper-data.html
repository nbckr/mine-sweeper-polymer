<link rel="import" href="../bower_components/polymer/polymer.html"/>
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html"/>

<dom-module id="minesweeper-data">

    <template>
        <iron-ajax
                on-server-response="refreshGameData()"
                id="ajaxgetter"
                url="http://localhost:9000/game/json"
                method="GET"
                contentType="application/json"
                handle-as="json"
                last-response="{{gamedata}}"
        ></iron-ajax>
    </template>

    <script>
        Polymer({

            is: 'minesweeper-data',

            ready: function () {
                console.log("data: ready");
                this.refreshGameData();
            },

            refreshGameData: function () {
                console.log("data: refresh");
                this.$.ajaxgetter.generateRequest();
            },

            properties: {
                gamedata: {
                    notify: true,       // two-way binding
                    value: null
                }
            }

        });
    </script>

</dom-module>
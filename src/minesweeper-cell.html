<link rel="import" href="../bower_components/polymer/polymer.html"/>
<link rel="import" href="../bower_components/paper-material/paper-material.html"/>

<dom-module id="minesweeper-cell">

    <style>
        paper-material {
            width: 40px;
            height: 40px;
            display: inline-block;
            margin: 2px;
        }
    </style>

    <template>
        <paper-material elevation="1" on-tap="_handleTap">
            {{cell.surroundingMines}}
        </paper-material>
        <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    </template>

    <script>
        Polymer({

            is: 'minesweeper-cell',

            properties: {
                //target: {
                //    type: Object,
                //    value: function() {
                //        return this.$.input;
                //    }
            },

            _handleTap: function (event) {
                if (event.detail.sourceEvent.button === 0) {
                    this.fire('ajax-post', {
                        action: 'reveal',
                        row: this.cell.position.row,
                        col: this.cell.position.col
                    });
                }

                else if (event.detail.sourceEvent.button === 2) {
                    this.fire('ajax-post', {
                        action: 'flag',
                        row: this.cell.position.row,
                        col: this.cell.position.col
                    });
                }

            }
        });
    </script>

</dom-module>
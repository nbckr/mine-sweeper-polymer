<link rel="import" href="../bower_components/polymer/polymer.html"/>
<link rel="import" href="../bower_components/paper-material/paper-material.html"/>

<dom-module id="minesweeper-cell">

    <style>
        paper-material {
            width: 40px;
            height: 40px;
            display: inline-block;
            background: white;
            box-sizing: border-box;
            margin: 2px;
            padding: 6px;
            border-radius: 2px;
            text-align: center;
        }
    </style>

    <template>
        <paper-material elevation="1" animated on-tap="_handleTap" on-mouseover="_animateMouseover" on-mouseout="_animateMouseout">
            {{cell.surroundingMines}}
        </paper-material>
        <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    </template>

    <script>
        Polymer({

            is: 'minesweeper-cell',

            properties: {
                //target: {
                //    type: Object,
                //    value: function() {
                //        return this.$.input;
                //    }
            },

            _handleTap: function (event) {
                if (event.detail.sourceEvent.button === 0) {
                    this.fire('ajax-post', {
                        action: 'reveal',
                        row: this.cell.position.row,
                        col: this.cell.position.col
                    });
                }

                else if (event.detail.sourceEvent.button === 2) {
                    this.fire('ajax-post', {
                        action: 'flag',
                        row: this.cell.position.row,
                        col: this.cell.position.col
                    });
                }

            },
            
            _animateMouseover: function () {
                console.log('cell-animate');
                this.$$('paper-material').elevation = 4;
            },

            _animateMouseout: function () {
                this.$$('paper-material').elevation = 1;
            }
        });
    </script>

</dom-module>